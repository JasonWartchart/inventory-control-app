 
 <!--    Th·ªÉ hi·ªán ƒëang ƒë·ªçc file HTML   -->
<!DOCTYPE html>

    <!--    Th·ªÉ hi·ªán ƒëang s·ª≠ d·ª•ng ng√¥n ng·ªØ ti·∫øng Vi·ªát   -->
<html lang="vi">
<head>

        <!--    Th·ªÉ hi·ªán ƒëang s·ª≠ d·ª•ng b·∫£ng k√Ω t·ª± (kh√¥ng b·ªã l·ªói font khi d√πng ti·∫øng Vi·ªát)   -->
    <meta charset="UTF-8">
    <title>Danh s√°ch s·∫£n ph·∫©m trong kho</title>

    <!--
        ƒê√¢y l√† ph·∫ßn CSS ƒë·ªÉ ƒë·ªãnh d·∫°ng b·∫£ng hi·ªÉn th·ªã.
        G·ªìm: cƒÉn gi·ªØa, vi·ªÅn b·∫£ng, font ch·ªØ, m√†u n·ªÅn c·ªôt ti√™u ƒë·ªÅ.
    -->
    <style>
        /* TH·ªÇ HI·ªÜN C√ÅI B·∫¢NG HI·ªÇN TH·ªä S·∫¢N PH·∫®M */
        .table-container {
            width: 800px;                   /* üëà Chi·ªÅu ngang c·ªë ƒë·ªãnh */
            height: 400px;                  /* üëà Chi·ªÅu cao c·ªë ƒë·ªãnh */
            overflow: auto;                /* ‚úÖ Cho ph√©p cu·ªôn n·∫øu b·∫£ng l·ªõn */
            margin: 0 auto;                /* ‚úÖ CƒÉn gi·ªØa b·∫£ng */
            border: 1px solid #ccc;
            background-color: white; /* ‚úÖ Th√™m: n·ªÅn tr·∫Øng cho container b·∫£ng */
            border-radius: 6px;       /* üëå Tu·ª≥ ch·ªçn: bo nh·∫π 4 g√≥c */
        }

        table {
            border-collapse: collapse;       /* G·ªôp vi·ªÅn b·∫£ng l·∫°i th√†nh 1 */
            width: max-content;              /* üëà Kh√¥ng b√≥p b·∫£ng, gi·ªØ nguy√™n k√≠ch th∆∞·ªõc */
            table-layout: fixed;             /* ‚úÖ B·∫Øt bu·ªôc ƒë·ªÉ sticky ho·∫°t ƒë·ªông ·ªïn ƒë·ªãnh */
            background-color: white;        /* ‚úÖ Th√™m: n·ªÅn tr·∫Øng cho to√†n b·∫£ng */
        }

        th, td {
            border: 1px solid #ccc;          /* Vi·ªÅn x√°m nh·∫°t cho √¥ */
            padding: 8px;                    /* C√°ch l·ªÅ trong √¥ 8px */
            text-align: center;              /* CƒÉn gi·ªØa n·ªôi dung trong √¥ */
            min-width: 120px;              /* ‚úÖ ƒê·∫∑t k√≠ch th∆∞·ªõc c·ªôt t·ªëi thi·ªÉu ƒë·ªÉ d·ªÖ nh√¨n */
        }
        
        th {
            background-color: #f2f2f2;       /* M√†u n·ªÅn c·ªßa h√†ng ti√™u ƒë·ªÅ */
        }

        h1 {
            text-align: center;              /* Ti√™u ƒë·ªÅ l·ªõn cƒÉn gi·ªØa */
        }
    






                    /* TH·ªÇ HI·ªÜN N√öT B·∫§M CHUY·ªÇN TRANG */
                    /* Container ch√≠nh cho kh·ªëi ph√¢n trang */
        .pagination {
            display: flex;                  /* Hi·ªÉn th·ªã c√°c n√∫t tr√™n 1 h√†ng ngang */
            justify-content: center;       /* CƒÉn gi·ªØa c√°c n√∫t trong kh·ªëi ph√¢n trang */
            margin-top: 20px;              /* C√°ch l·ªÅ ph√≠a tr√™n 20px */
            gap: 6px;                      /* Kho·∫£ng c√°ch gi·ªØa c√°c n√∫t */
            flex-wrap: wrap;               /* Cho ph√©p t·ª± xu·ªëng h√†ng n·∫øu kh√¥ng ƒë·ªß ch·ªó */
        }

                    /* ƒê·ªãnh d·∫°ng chung cho c·∫£ th·∫ª <a> (link c√≥ th·ªÉ click) v√† <span> (text tƒ©nh) */
        .pagination a,
        .pagination span {
            display: inline-block;         /* Hi·ªÉn th·ªã d·∫°ng kh·ªëi n·∫±m ngang */
            padding: 8px 12px;             /* Kho·∫£ng c√°ch gi·ªØa vi·ªÅn v√† n·ªôi dung trong n√∫t */
            border: 1px solid #ddd;        /* Vi·ªÅn m√†u x√°m nh·∫°t */
            border-radius: 50%;            /* Bo tr√≤n 100% ‚Üí t·∫°o h√¨nh tr√≤n */
            text-decoration: none;         /* B·ªè g·∫°ch ch√¢n cho li√™n k·∫øt */
            color: black;                  /* M√†u ch·ªØ ƒëen */
            min-width: 32px;               /* Chi·ªÅu ngang t·ªëi thi·ªÉu c·ªßa n√∫t */
            text-align: center;            /* CƒÉn gi·ªØa ch·ªØ trong n√∫t */
            font-weight: bold;             /* Ch·ªØ in ƒë·∫≠m */
        }

                    /* Hi·ªáu ·ª©ng khi r√™ chu·ªôt v√†o n√∫t c√≥ th·ªÉ b·∫•m */
        .pagination a:hover {
        background-color: #f2f2f2;     /* M√†u n·ªÅn s√°ng l√™n khi hover */
        }
                    /* Hi·ªáu ·ª©ng khi r√™ chu·ªôt v√†o n√∫t kh√¥ng th·ªÉ b·∫•m */
                    /* N√∫t ƒëang ·ªü tr·∫°ng th√°i ƒë∆∞·ª£c ch·ªçn (trang hi·ªán t·∫°i) */
        .pagination .active {
            background-color: orange;      /* M√†u n·ªÅn cam */
            color: white;                  /* Ch·ªØ tr·∫Øng */
            border-color: orange;          /* Vi·ªÅn c√πng m√†u v·ªõi n·ªÅn */
        }

                    /* N√∫t kh√¥ng th·ªÉ b·∫•m (v√≠ d·ª•: m≈©i t√™n tr√°i khi ƒëang ·ªü trang 1) */
        .pagination .disabled {
            color: #ccc;                   /* Ch·ªØ x√°m nh·∫°t */
            border-color: #eee;            /* Vi·ªÅn m·ªù h∆°n */
            pointer-events: none;          /* Kh√¥ng cho b·∫•m / kh√¥ng click ƒë∆∞·ª£c */
        }
    </style>
</head>

<body>

        <h1>üì¶ Danh s√°ch s·∫£n ph·∫©m trong kho</h1>

        <!-- 
        B·ªçc b·∫£ng trong 1 khung c√≥ class 'table-container'
        ƒë·ªÉ CSS c√≥ th·ªÉ c·ªë ƒë·ªãnh k√≠ch th∆∞·ªõc khung, th√™m thanh cu·ªôn -->
        <div class="table-container">

            <!--
                B·∫Øt ƒë·∫ßu b·∫£ng HTML.
                D·ªØ li·ªáu s·∫Ω ƒë∆∞·ª£c Flask truy·ªÅn v√†o bi·∫øn "columns" (t√™n c√°c c·ªôt) v√† "data" (c√°c d√≤ng).
            -->
            <table>
                <thead>
                    <tr>
                        <!--
                            Duy·ªát qua danh s√°ch t√™n c·ªôt (columns),
                            ƒë·ªÉ t·∫°o c√°c √¥ ti√™u ƒë·ªÅ b·∫£ng (th·∫ª <th>)
                        -->
                        {% for col in columns %}
                        <th>{{ col }}</th> <!-- Hi·ªÉn th·ªã t√™n c·ªôt, v√≠ d·ª•: S·ªë th·ª© t·ª±, H√¨nh d·∫°ng, v.v. -->
                        {% endfor %}
                   </tr>
                </thead>

                <tbody>
                    <!--
                        Duy·ªát qua t·ª´ng d√≤ng d·ªØ li·ªáu (data),
                        m·ªói d√≤ng l√† 1 dictionary v·ªõi key l√† t√™n c·ªôt.
                    -->
                    {% for row in data %}
                    <tr>
                        {% for col in columns %}
                        <td>
                            <!-- üëá N·∫øu c·ªôt hi·ªán t·∫°i l√† "Ng√†y nh·∫≠p kho", th√¨ hi·ªÉn th·ªã form nh·∫≠p ng√†y v√† n√∫t L∆∞u -->
                            {% if col == "Ng√†y nh·∫≠p kho" %}
                            <form method="POST" action="/update-ngay">
                            <!-- √î nh·∫≠p ng√†y, c√≥ gi√° tr·ªã m·∫∑c ƒë·ªãnh t·ª´ Excel n·∫øu c√≥ -->
                            <input type="date" name="ngay" value="{{ row[col]|default('') }}" required>

                            <!-- Input ·∫©n: ch·ª©a m√£ ƒë·ªãnh danh s·∫£n ph·∫©m (Code) -->
                            <input type="hidden" name="Code" value="{{ row['Code'] }}">

                            <!-- Input ·∫©n: x√°c ƒë·ªãnh ƒëang c·∫≠p nh·∫≠t c·ªôt n√†o -->
                            <input type="hidden" name="cot" value="Ng√†y nh·∫≠p kho">

                            <!-- N√∫t g·ª≠i form -->
                            <button type="submit">L∆∞u</button>
                            </form>

                            <!-- üëá N·∫øu l√† c·ªôt "Ng√†y l·∫•y h√†ng" -->
                            {% elif col == "Ng√†y l·∫•y h√†ng" %}
                            <form method="POST" action="/update-ngay">
                            <input type="date" name="ngay" value="{{ row[col]|default('') }}">
                            <input type="hidden" name="Code" value="{{ row['Code'] }}">
                            <input type="hidden" name="cot" value="Ng√†y l·∫•y h√†ng">
                            <button type="submit">L∆∞u</button>
                            </form>

                            <!-- üëá N·∫øu l√† c·ªôt "Ng√†y tr·∫£ h√†ng" -->
                            {% elif col == "Ng√†y tr·∫£ h√†ng" %}
                            <form method="POST" action="/update-ngay">
                            <input type="date" name="ngay" value="{{ row[col]|default('') }}">
                            <input type="hidden" name="Code" value="{{ row['Code'] }}">
                            <input type="hidden" name="cot" value="Ng√†y tr·∫£ h√†ng">
                            <button type="submit">L∆∞u</button>
                            </form>

                            <!-- üëá C√°c c·ªôt kh√°c ch·ªâ hi·ªÉn th·ªã gi√° tr·ªã nh∆∞ b√¨nh th∆∞·ªùng -->
                            {% else %}
                            {{ row[col] }}
                            {% endif %}
                        </td>
                            {% endfor %}
                    </tr>

                    {% endfor %}
                </tbody>
            </table>
        </div>









        <!-- PH√ÇN TRANG: giao di·ªán n√∫t tr√≤n ƒë·∫πp nh∆∞ trong h√¨nh -->
        <div class="pagination">
            <!-- M≈©i t√™n v·ªÅ trang ƒë·∫ßu v√† trang tr∆∞·ªõc -->
            {% if current_page > 1 %}
                <a href="/inventory?page=1">&laquo;</a>
                <a href="/inventory?page={{ current_page - 1 }}">&lsaquo;</a>
            {% else %}
                <span class="disabled">&laquo;</span>
                <span class="disabled">&lsaquo;</span>
            {% endif %}

            <!-- Hi·ªÉn th·ªã c√°c trang trong kho·∫£ng [current_page - 1, current_page + 1] -->
            {% for p in range(1, total_pages + 1) %}
                {% if p >= current_page - 1 and p <= current_page + 1 %}
                    {% if  p == current_page %}
                        <!-- Trang hi·ªán t·∫°i -->
                        <span class="active">{{ p }}</span>
                    {% else %}
                        <!-- C√°c trang li·ªÅn k·ªÅ c√≥ th·ªÉ click -->
                        <a href="/inventory?page={{ p }}">{{ p }}</a>
                    {% endif %}
                {% endif %}
            {% endfor %}

            <!-- M≈©i t√™n t·ªõi trang sau v√† trang cu·ªëi -->
            {% if current_page < total_pages %}
                <a href="/inventory?page={{ current_page + 1 }}">&rsaquo;</a>
                <a href="/inventory?page={{ total_pages }}">&raquo;</a>
            {% else %}
                <span class="disabled">&rsaquo;</span>
                <span class="disabled">&raquo;</span>
            {% endif %}
        </div>
        </div>




        <!-- üîò N√∫t ƒë·ªÉ m·ªü popup th√™m s·∫£n ph·∫©m -->
        <div style="text-align: center; margin-top: 20px;">
            <button onclick="openForm()">‚ûï Th√™m s·∫£n ph·∫©m</button>
        </div>

        <!-- üì¶ POPUP form nh·∫≠p s·∫£n ph·∫©m m·ªõi -->
        <div id="popupForm" style="
                display: none;                     
                position: fixed;                  
                top: 20%; left: 50%;
                transform: translate(-50%, -20%); 
                background: white;               
                padding: 20px;                
                border: 1px solid #ccc;         
                border-radius: 8px;               
                z-index: 1000;">
            <h3>üì¶ Th√™m s·∫£n ph·∫©m m·ªõi</h3>

            <!-- Form g·ª≠i d·ªØ li·ªáu v·ªÅ Flask -->
            <form method="POST" action="/them-san-pham">

                <!-- Tr∆∞·ªùng: H√¨nh d·∫°ng s·∫£n ph·∫©m -->
                <label>H√¨nh d·∫°ng:</label><br>
                <input type="text" name="hinh_dang" required><br><br>

                <!-- Tr∆∞·ªùng: Code s·∫£n ph·∫©m -->
                <label>Code:</label><br>
                <input type="text" name="code" required><br><br>

                <!-- Tr∆∞·ªùng: Tu·ªïi th·ªç s·∫£n ph·∫©m -->
                <label>Tu·ªïi th·ªç:</label><br>
                <input type="number" name="tuoi_tho" required><br><br>

                <!-- N√∫t l∆∞u g·ª≠i form -->
                <button type="submit">L∆∞u</button>

                <!-- N√∫t ƒë√≥ng form -->
                <button type="button" onclick="closeForm()">ƒê√≥ng</button>

            </form>
        </div>

        <!-- ‚òÅÔ∏è Overlay n·ªÅn m·ªù khi popup b·∫≠t l√™n -->
        <div id="overlay" onclick="closeForm()" style="
            display: none;                     /* ·∫®n ban ƒë·∫ßu */
            position: fixed;                  /* C·ªë ƒë·ªãnh to√†n trang */
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0, 0, 0, 0.3);   /* N·ªÅn ƒëen m·ªù */
            z-index: 999;">                   <!-- N·∫±m d∆∞·ªõi popup nh∆∞ng tr√™n m·ªçi th·ª© kh√°c -->
        </div>

        <!-- üß† JavaScript ƒëi·ªÅu khi·ªÉn m·ªü / ƒë√≥ng popup -->
        <script>
            function openForm() {
                // Hi·ªÉn th·ªã form nh·∫≠p v√† overlay
                document.getElementById('popupForm').style.display = 'block';
                document.getElementById('overlay').style.display = 'block';
                }

            function closeForm() {
                // ·∫®n form nh·∫≠p v√† overlay
                document.getElementById('popupForm').style.display = 'none';
                document.getElementById('overlay').style.display = 'none';
            }
        </script>




</body>
</html>
